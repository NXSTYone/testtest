<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <title>CryptoLand | Крипто-Мегаполис</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ПРЕЛОАДЕР -->
    <div class="preloader" id="preloader">
        <div class="preloader-content">
            <div class="preloader-logo">
                <div class="logo-glow"></div>
                <div class="preloader-logo-container">
                    <img src="assets/logo.png" alt="CryptoLand" class="preloader-logo-image" id="preloaderLogo">
                    <div class="preloader-logo-fallback" id="preloaderLogoFallback" style="display: none;">
                        <i class="fas fa-city"></i>
                    </div>
                </div>
                <div class="logo-text-wrapper">
                    <div class="logo-main">CRYPTOLAND</div>
                    <div class="logo-sub">КРИПТО-МЕГАПОЛИС</div>
                </div>
            </div>
            <div class="preloader-progress">
                <div class="progress-bar"></div>
            </div>
            <p class="preloader-subtitle">Инициализация виртуального пространства...</p>
        </div>
    </div>

    <div class="app-container">
        <main class="main-content full-width">
            <!-- ШАПКА С ЛОГОТИПОМ И АВАТАРОМ -->
            <header class="main-header">
                <div class="header-left">
                    <!-- АВАТАР МЭРА -->
                    <div class="mayor-avatar-container" id="mayorAvatarContainer">
                        <div class="mayor-avatar">
                            <img src="assets/avatar-default.png" alt="Mayor Avatar" class="avatar-image" id="avatarImage">
                            <div class="avatar-fallback" id="avatarFallback" style="display: none;">
                                <i class="fas fa-user-tie"></i>
                            </div>
                        </div>
                        <div class="avatar-glow"></div>
                        <div class="avatar-status"></div>
                    </div>
                </div>
                
                <div class="header-center">
                    <div class="crown-logo">
                        <i class="fas fa-crown"></i>
                    </div>
                    <div class="logo-container">
                        <div class="custom-logo" id="customLogo">
                            <img src="assets/logo.png" alt="CryptoLand Logo" class="logo-image" id="logoImage">
                            <div class="logo-fallback" id="logoFallback" style="display: none;">
                                <i class="fas fa-city"></i>
                            </div>
                        </div>
                        <div class="logo-block">
                            <h1 class="logo-main-title">CRYPTO<span class="highlight">LAND</span></h1>
                        </div>
                    </div>
                    <div class="logo-description" id="logoDescription">ВИРТУАЛЬНЫЙ КРИПТО-МЕГАПОЛИС</div>
                </div>
                
                <div class="header-right">
                    <!-- КНОПКА ПЕРЕКЛЮЧЕНИЯ ЯЗЫКА -->
                    <div class="language-switcher">
                        <button class="lang-btn active" data-lang="ru">RU</button>
                        <button class="lang-btn" data-lang="en">EN</button>
                    </div>
                    
                    <div class="wallet-header-container">
                        <div class="wallet-mini-info">
                            <span class="wallet-mini-label">USDT</span>
                            <span class="wallet-mini-balance" id="headerWalletBalance">0.00</span>
                        </div>
                        <button class="wallet-connect-button" id="headerConnectBtn">
                            <i class="fas fa-plug"></i>
                            <span id="connectBtnText">ПОДКЛЮЧИТЬ</span>
                        </button>
                    </div>
                    <!-- АДРЕС КОШЕЛЬКА БУДЕТ ДОБАВЛЕН СЮДА ЧЕРЕЗ JS -->
                </div>
            </header>

            <!-- ВЕРТИКАЛЬНАЯ НАВИГАЦИЯ -->
            <div class="navigation-vertical">
                <div class="nav-menu-main">
                    <button class="nav-menu-item active" data-tab="dashboard">
                        <i class="fas fa-city"></i>
                        <span data-i18n="nav_dashboard">Панель мэра</span>
                    </button>
                    <button class="nav-menu-item" data-tab="districts">
                        <i class="fas fa-building"></i>
                        <span data-i18n="nav_districts">Мои районы</span>
                        <span class="nav-badge" id="navDepositCount">0</span>
                    </button>
                    <button class="nav-menu-item" data-tab="treasury">
                        <i class="fas fa-vault"></i>
                        <span data-i18n="nav_treasury">Городская казна</span>
                    </button>
                    <button class="nav-menu-item" data-tab="tax">
                        <i class="fas fa-file-invoice-dollar"></i>
                        <span data-i18n="nav_tax">Налоговая</span>
                    </button>
                    <button class="nav-menu-item" data-tab="rankings">
                        <i class="fas fa-trophy"></i>
                        <span data-i18n="nav_rankings">Рейтинг мэров</span>
                    </button>
                </div>
                
                <div class="nav-actions-vertical">
                    <a href="https://t.me/CRYPTOLAND_SUPPORT" target="_blank" class="nav-action-btn telegram" id="telegramSupportLink">
                        <i class="fab fa-telegram-plane"></i>
                        <span data-i18n="nav_support">SUPPORT</span>
                    </a>
                    <a href="https://t.me/CRYPTOLAND_CHANNEL" target="_blank" class="nav-action-btn channel" id="telegramChannelLink">
                        <i class="fab fa-telegram"></i>
                        <span data-i18n="nav_channel">Telegram-канал</span>
                    </a>
                    <a href="https://t.me/CRYPTOLAND_GOVERNOR_BOT" target="_blank" class="nav-action-btn governor" id="telegramGovernorLink">
                        <i class="fas fa-crown"></i>
                        <span data-i18n="nav_governor">Губернатор</span>
                    </a>
                </div>
            </div>

            <!-- СТРАНИЦЫ -->
            <!-- 1. ПАНЕЛЬ МЭРА -->
            <section class="content-section active" id="dashboard">
                <div class="dashboard-header">
                    <h2 class="welcome-title">
                        <span class="glow-text" data-i18n="welcome_title">ПАНЕЛЬ УПРАВЛЕНИЯ</span>
                    </h2>
                    <p class="welcome-subtitle" data-i18n="welcome_subtitle">Выберите район для развития вашего города</p>
                </div>

                <div class="stats-cards">
                    <div class="stat-card blue">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h4 class="stat-title" data-i18n="stat_population">Население</h4>
                            <div class="stat-value" id="statPopulation">0</div>
                            <div class="stat-trend">
                                <i class="fas fa-user-plus"></i>
                                <span data-i18n="stat_trend">всего жителей вашего города</span>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card gold">
                        <div class="stat-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="stat-content">
                            <h4 class="stat-title" data-i18n="stat_treasury">Общая казна</h4>
                            <div class="stat-value" id="statTotal">0.00 USDT</div>
                            <div class="stat-trend">
                                <i class="fas fa-sack-dollar"></i>
                                <span data-i18n="per_day">сумма процентов и реферальных доступных к выводу</span>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card green">
                        <div class="stat-icon">
                            <i class="fas fa-hand-holding-usd"></i>
                        </div>
                        <div class="stat-content">
                            <h4 class="stat-title" data-i18n="stat_taxes">Налоговые сборы</h4>
                            <div class="stat-value" id="statTaxes">0.00 USDT</div>
                            <div class="stat-trend">
                                <i class="fas fa-sack-dollar"></i>
                                <span data-i18n="stat_available">реферальные начисления за все время</span>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card purple">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <h4 class="stat-title" data-i18n="stat_income">Доход с района</h4>
                            <div class="stat-value" id="statIncome">0.00 USDT</div>
                            <div class="stat-trend">
                                <i class="fas fa-sack-dollar"></i>
                                <span data-i18n="stat_daily">проценты по тарифам за все время</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tariffs-section">
                    <div class="section-header">
                        <h3 class="section-title">
                            <i class="fas fa-landmark"></i>
                            <span data-i18n="tariffs_title">Доступные районы для инвестиций</span>
                        </h3>
                        <p class="section-description" data-i18n="tariffs_subtitle">Инвестируйте в развитие города и получайте ежедневный доход</p>
                    </div>
                    <div class="tariffs-grid" id="tariffsGrid"></div>
                </div>

                <div class="quick-info">
                    <div class="info-card">
                        <div class="info-card-header">
                            <i class="fas fa-question-circle"></i>
                            <h4 data-i18n="info_how_title">Как это работает?</h4>
                        </div>
                        <div class="info-card-body">
                            <ul class="info-list">
                                <li><i class="fas fa-check-circle"></i> <span data-i18n="info_how_1">Инвестируйте от 10 USDT</span></li>
                                <li><i class="fas fa-check-circle"></i> <span data-i18n="info_how_2">Ежедневный доход 0.5% - 1.5%</span></li>
                                <li><i class="fas fa-check-circle"></i> <span data-i18n="info_how_3">Реферальные бонусы до 7%</span></li>
                                <li><i class="fas fa-check-circle"></i> <span data-i18n="info_how_4">Вывод процентов ежедневно</span></li>
                                <li><i class="fas fa-check-circle"></i> <span data-i18n="info_how_5">Тело депозита по окончании срока</span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="info-card">
                        <div class="info-card-header">
                            <i class="fas fa-lightbulb"></i>
                            <h4 data-i18n="info_strategy_title">Стратегия развития</h4>
                        </div>
                        <div class="info-card-body">
                            <ul class="info-list">
                                <li><i class="fas fa-check-circle"></i> <span data-i18n="info_strategy_1">Начинайте с "Спального района"</span></li>
                                <li><i class="fas fa-check-circle"></i> <span data-i18n="info_strategy_2">Реинвестируйте доходы</span></li>
                                <li><i class="fas fa-check-circle"></i> <span data-i18n="info_strategy_3">Привлекайте рефералов</span></li>
                                <li><i class="fas fa-check-circle"></i> <span data-i18n="info_strategy_4">Активируйте бонус мэра</span></li>
                                <li><i class="fas fa-check-circle"></i> <span data-i18n="info_strategy_5">Создайте пассивный доход</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. МОИ РАЙОНЫ -->
            <section class="content-section" id="districts">
                <div class="section-header">
                    <h3 class="section-title">
                        <i class="fas fa-building"></i>
                        <span data-i18n="districts_title">Мои районы</span>
                    </h3>
                    <p class="section-description" data-i18n="districts_subtitle">Управление вашими инвестициями</p>
                </div>

                <div class="districts-dashboard">
                    <div class="districts-controls">
                        <div class="filter-pills">
                            <button class="filter-pill active" data-filter="all"><span data-i18n="filter_all">Все районы</span></button>
                            <button class="filter-pill" data-filter="active"><span data-i18n="filter_active">Активные</span></button>
                            <button class="filter-pill" data-filter="finished"><span data-i18n="filter_finished">Завершенные</span></button>
                        </div>
                        <div class="districts-actions">
                            <button class="action-btn refresh-btn" id="refreshDeposits">
                                <i class="fas fa-sync-alt"></i>
                                <span data-i18n="refresh">Обновить</span>
                            </button>
                            <button class="action-btn invest-btn" id="goToInvestFromDistricts">
                                <i class="fas fa-plus-circle"></i>
                                <span data-i18n="invest_start">Начать инвестировать</span>
                            </button>
                        </div>
                    </div>

                    <div class="investment-summary">
                        <div class="summary-item">
                            <span class="summary-label" data-i18n="summary_total">Всего вложено</span>
                            <span class="summary-value" id="summaryTotal">0.00 USDT</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label" data-i18n="summary_active">Активные вложения</span>
                            <span class="summary-value" id="summaryActive">0.00 USDT</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label" data-i18n="summary_earned">Заработано всего</span>
                            <span class="summary-value profit" id="summaryAccumulated">0.00 USDT</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label" data-i18n="summary_available">Доступно к выводу</span>
                            <span class="summary-value available" id="summaryAvailable">0.00 USDT</span>
                        </div>
                    </div>

                    <div class="deposits-grid" id="depositsGrid"></div>
                    
                    <div class="empty-state hidden" id="emptyDeposits">
                        <div class="empty-icon">
                            <i class="fas fa-city"></i>
                        </div>
                        <h3 data-i18n="empty_title">У вас пока нет районов</h3>
                        <p data-i18n="empty_text">Начните инвестировать в развитие мегаполиса</p>
                        <button class="primary-btn" id="goToInvest">
                            <i class="fas fa-plus-circle"></i>
                            <span data-i18n="invest_start">Начать инвестировать</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- 3. ГОРОДСКАЯ КАЗНА -->
            <section class="content-section" id="treasury">
                <div class="section-header">
                    <h3 class="section-title">
                        <i class="fas fa-vault"></i>
                        <span data-i18n="treasury_title">Городская казна</span>
                    </h3>
                    <p class="section-description" data-i18n="treasury_subtitle">Управление финансами и вывод средств</p>
                </div>

                <div class="balance-cards">
                    <div class="balance-card income">
                        <div class="balance-card-header">
                            <i class="fas fa-home"></i>
                            <h4 data-i18n="treasury_income">Доход с районов</h4>
                            <span class="commission-badge"><span data-i18n="commission">комиссия</span> 15%</span>
                        </div>
                        <div class="balance-card-body">
                            <div class="balance-amount-wrapper">
                                <span class="balance-label" data-i18n="available">Доступно</span>
                                <span class="balance-amount" id="treasuryIncome">0.00 USDT</span>
                            </div>
                            <button class="withdraw-btn" id="withdrawIncomeBtn" disabled>
                                <i class="fas fa-download"></i>
                                <span data-i18n="withdraw_income">Вывести доход</span>
                            </button>
                        </div>
                    </div>

                    <div class="balance-card tax">
                        <div class="balance-card-header">
                            <i class="fas fa-users"></i>
                            <h4 data-i18n="treasury_tax">Налоговые сборы</h4>
                            <span class="commission-badge zero"><span data-i18n="commission_zero">комиссия 0%</span></span>
                        </div>
                        <div class="balance-card-body">
                            <div class="balance-amount-wrapper">
                                <span class="balance-label" data-i18n="available">Доступно</span>
                                <span class="balance-amount" id="treasuryTax">0.00 USDT</span>
                            </div>
                            <button class="withdraw-btn" id="withdrawTaxBtn" disabled>
                                <i class="fas fa-download"></i>
                                <span data-i18n="withdraw_tax">Вывести налоги</span>
                            </button>
                        </div>
                    </div>

                    <div class="balance-card deposit">
                        <div class="balance-card-header">
                            <i class="fas fa-piggy-bank"></i>
                            <h4 data-i18n="treasury_deposit">Стартовый бюджет</h4>
                            <span class="commission-badge locked"><span data-i18n="locked">заблокировано</span></span>
                        </div>
                        <div class="balance-card-body">
                            <div class="balance-amount-wrapper">
                                <span class="balance-label" data-i18n="invested">Вложения</span>
                                <span class="balance-amount" id="treasuryDeposit">0.00 USDT</span>
                            </div>
                            <button class="check-btn" id="checkDepositsBtn">
                                <i class="fas fa-search"></i>
                                <span data-i18n="check_deposits">Проверить завершение</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="transactions-section">
                    <div class="transactions-header">
                        <div class="transactions-title-wrapper">
                            <i class="fas fa-history"></i>
                            <h4 class="transactions-title" data-i18n="history_title">История операций</h4>
                        </div>
                        <div class="transactions-filters">
                            <div class="filter-group">
                                <label for="transactionDateFilter" data-i18n="period">Период:</label>
                                <div class="custom-select">
                                    <select id="transactionDateFilter" class="filter-select">
                                        <option value="all" data-i18n="period_all">За все время</option>
                                        <option value="today" data-i18n="period_today">Сегодня</option>
                                        <option value="week" data-i18n="period_week">Последние 7 дней</option>
                                        <option value="month" data-i18n="period_month">Последние 30 дней</option>
                                    </select>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            <div class="filter-group">
                                <label for="transactionTypeFilter" data-i18n="type">Тип:</label>
                                <div class="custom-select">
                                    <select id="transactionTypeFilter" class="filter-select">
                                        <option value="all" data-i18n="type_all">Все операции</option>
                                        <option value="invest" data-i18n="type_invest">Инвестиции</option>
                                        <option value="withdraw" data-i18n="type_withdraw">Вывод доходов</option>
                                        <option value="referral" data-i18n="type_referral">Реферальные</option>
                                        <option value="deposit" data-i18n="type_return">Возврат тела</option>
                                    </select>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="transactions-table-container">
                        <table class="transactions-table">
                            <thead>
                                <tr>
                                    <th data-i18n="table_type">Тип операции</th>
                                    <th data-i18n="table_amount">Сумма</th>
                                    <th data-i18n="table_date">Дата и время</th>
                                    <th data-i18n="table_status">Статус</th>
                                    <th data-i18n="table_hash">Хэш транзакции</th>
                                </tr>
                            </thead>
                            <tbody id="transactionsBody"></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- 4. НАЛОГОВАЯ -->
            <section class="content-section" id="tax">
                <div class="section-header">
                    <h3 class="section-title">
                        <i class="fas fa-file-invoice-dollar"></i>
                        <span data-i18n="tax_title">Налоговая служба</span>
                    </h3>
                    <p class="section-description" data-i18n="tax_subtitle">Реферальная программа и налоговые отчисления</p>
                </div>

                <!-- НОВЫЙ БЛОК: Общий оборот структуры -->
                <div class="turnover-block" id="totalStructureTurnover"></div>

                <div class="referral-card">
                    <div class="referral-card-header">
                        <div class="referral-title">
                            <i class="fas fa-share-alt"></i>
                            <h4 data-i18n="referral_link">Ваша реферальная ссылка</h4>
                        </div>
                        <span class="referral-badge" data-i18n="referral_active">активна</span>
                    </div>
                    <div class="referral-card-body">
                        <div class="referral-link-wrapper">
                            <i class="fas fa-link"></i>
                            <input type="text" class="referral-link-input" id="refLinkInput" readonly value="Подключите кошелек">
                        </div>
                        <div class="referral-actions">
                            <button class="referral-action-btn copy" id="copyRefLink">
                                <i class="fas fa-copy"></i>
                                <span data-i18n="copy">Копировать</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="referrer-info-card" id="referrerInfoCard" style="margin-bottom: 25px; display: none;">
                    <div class="referrer-info-header">
                        <i class="fas fa-user-plus"></i>
                        <h4 data-i18n="your_referrer">Ваш пригласитель</h4>
                    </div>
                    <div class="referrer-info-body">
                        <div class="referrer-avatar">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <div class="referrer-details">
                            <div class="referrer-address" id="referrerAddress">—</div>
                            <div class="referrer-stats">
                                <span class="referrer-stat">
                                    <i class="fas fa-calendar-alt"></i>
                                    <span data-i18n="since">с</span> <span id="referrerSince">—</span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="referral-stats-grid">
                    <div class="referral-stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <div class="stat-details">
                            <span class="stat-label" data-i18n="total_residents">Всего жителей</span>
                            <span class="stat-number" id="totalReferrals">0</span>
                        </div>
                    </div>
                    <div class="referral-stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-hand-holding-usd"></i>
                        </div>
                        <div class="stat-details">
                            <span class="stat-label" data-i18n="tax_collected">Налоговые сборы</span>
                            <span class="stat-number" id="totalTaxes">0.00 USDT</span>
                        </div>
                    </div>
                    <div class="referral-stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <div class="stat-details">
                            <span class="stat-label" data-i18n="total_turnover">Общий оборот</span>
                            <span class="stat-number" id="totalTurnover">0.00 USDT</span>
                        </div>
                    </div>
                    <div class="referral-stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="stat-details">
                            <span class="stat-label" data-i18n="mayor_bonus">Бонус мэра</span>
                            <span class="stat-number" id="mayorBonus">Неактивен</span>
                        </div>
                    </div>
                </div>

                <!-- НАВИГАЦИЯ ПО ТАБЛИЦЕ УРОВНЕЙ -->
                <div class="levels-navigation">
                    <button class="levels-nav-btn active" id="scrollToConditions">
                        <i class="fas fa-list-ul"></i>
                        <span data-i18n="conditions">Условия</span>
                    </button>
                    <button class="levels-nav-btn" id="scrollToStats">
                        <i class="fas fa-chart-simple"></i>
                        <span data-i18n="your_stats">Ваша статистика</span>
                    </button>
                </div>

                <div class="levels-section">
                    <div class="levels-header">
                        <h4 class="levels-title">
                            <i class="fas fa-layer-group"></i>
                            <span data-i18n="levels_title">Реферальные уровни</span>
                        </h4>
                        <p class="levels-description" data-i18n="levels_description">Чем выше уровень, тем больше процент налоговых отчислений</p>
                    </div>
                    
                    <div class="levels-table-wrapper">
                        <table class="levels-table">
                            <thead>
                                <tr>
                                    <th colspan="4" class="conditions-header" id="conditionsHeader"><span data-i18n="conditions">Условия</span></th>
                                    <th colspan="3" class="stats-header" id="statsHeader"><span data-i18n="your_stats">Ваша статистика</span></th>
                                </tr>
                                <tr>
                                    <th data-i18n="level">Уровень</th>
                                    <th data-i18n="percent">Процент</th>
                                    <th data-i18n="structure_turnover">Оборот структуры</th>
                                    <th data-i18n="personal_deposit">Личный депозит</th>
                                    <th data-i18n="invited">Приглашено</th>
                                    <th data-i18n="your_turnover">Ваш оборот</th>
                                    <th data-i18n="status">Статус (бонус)</th>
                                </tr>
                            </thead>
                            <tbody id="levelsBody"></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- 5. РЕЙТИНГ МЭРОВ -->
            <section class="content-section" id="rankings">
                <div class="section-header">
                    <h3 class="section-title">
                        <i class="fas fa-trophy"></i>
                        <span data-i18n="rankings_title">Рейтинг мэров</span>
                    </h3>
                    <p class="section-description" data-i18n="rankings_subtitle">Соревнуйтесь за звание лучшего мэра</p>
                </div>

                <div class="ranking-controls">
                    <div class="ranking-type-filters">
                        <button class="ranking-type-btn active" data-type="tax">
                            <i class="fas fa-coins"></i>
                            <span data-i18n="by_tax">По налогам</span>
                        </button>
                        <button class="ranking-type-btn" data-type="population">
                            <i class="fas fa-users"></i>
                            <span data-i18n="by_population">По населению</span>
                        </button>
                        <button class="ranking-type-btn" data-type="total">
                            <i class="fas fa-chart-line"></i>
                            <span data-i18n="by_income">По доходу</span>
                        </button>
                    </div>
                    <div class="ranking-period-filter">
                        <div class="custom-select">
                            <select id="rankingPeriodFilter" class="ranking-period-select">
                                <option value="all" data-i18n="period_all_time">За все время</option>
                                <option value="month" data-i18n="period_30_days">За последние 30 дней</option>
                                <option value="week" data-i18n="period_7_days">За последние 7 дней</option>
                                <option value="day" data-i18n="period_today_small">За сегодня</option>
                            </select>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                </div>

                <div class="ranking-podium">
                    <div class="podium-place second">
                        <div class="podium-medal silver">
                            <i class="fas fa-medal"></i>
                            <span class="podium-rank">2</span>
                        </div>
                        <div class="podium-avatar">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <div class="podium-name" id="podiumName2">Мэр #2</div>
                        <div class="podium-value" id="podiumValue2">0 USDT</div>
                    </div>
                    <div class="podium-place first">
                        <div class="podium-crown">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="podium-medal gold">
                            <span class="podium-rank">1</span>
                        </div>
                        <div class="podium-avatar champion">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="podium-name" id="podiumName1">Мэр #1</div>
                        <div class="podium-value" id="podiumValue1">0 USDT</div>
                    </div>
                    <div class="podium-place third">
                        <div class="podium-medal bronze">
                            <i class="fas fa-medal"></i>
                            <span class="podium-rank">3</span>
                        </div>
                        <div class="podium-avatar">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <div class="podium-name" id="podiumName3">Мэр #3</div>
                        <div class="podium-value" id="podiumValue3">0 USDT</div>
                    </div>
                </div>

                <div class="ranking-table-container">
                    <div class="ranking-table-header">
                        <h4 data-i18n="full_ranking">Полный рейтинг мэров</h4>
                        <div class="ranking-search">
                            <i class="fas fa-search"></i>
                            <input type="text" class="ranking-search-input" placeholder="Поиск по адресу...">
                        </div>
                    </div>
                    <div class="ranking-table-wrapper">
                        <table class="ranking-table">
                            <thead>
                                <tr>
                                    <th data-i18n="place">Место</th>
                                    <th data-i18n="mayor">Мэр</th>
                                    <th data-i18n="taxes">Налоги</th>
                                    <th data-i18n="population">Население</th>
                                    <th data-i18n="total_income">Общий доход</th>
                                    <th data-i18n="city">Город</th>
                                </tr>
                            </thead>
                            <tbody id="rankingBody"></tbody>
                        </table>
                    </div>
                </div>

                <div class="user-ranking-card">
                    <div class="user-ranking-header">
                        <div class="user-position">
                            <span class="position-label" data-i18n="your_place">Ваше место</span>
                            <span class="position-number" id="userRank">#0</span>
                        </div>
                        <div class="user-stats">
                            <div class="user-stat">
                                <i class="fas fa-coins"></i>
                                <span id="userTaxes">0 USDT</span>
                            </div>
                            <div class="user-stat">
                                <i class="fas fa-users"></i>
                                <span id="userPopulation">0</span>
                            </div>
                            <div class="user-stat">
                                <i class="fas fa-chart-line"></i>
                                <span id="userTotal">0 USDT</span>
                            </div>
                        </div>
                    </div>
                    <div class="user-ranking-progress">
                        <div class="progress-info">
                            <span data-i18n="to_next_place">До следующего места</span>
                            <span class="progress-diff" id="nextRankDiff">0 USDT</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- МОДАЛЬНЫЕ ОКНА -->
    <div class="modal-overlay" id="modalOverlay"></div>

    <!-- МОДАЛКА ПОДКЛЮЧЕНИЯ КОШЕЛЬКА -->
    <div class="modal" id="walletModal">
        <div class="modal-header">
            <h3>
                <i class="fas fa-wallet"></i>
                <span data-i18n="connect_wallet">Подключить кошелек</span>
            </h3>
            <button class="modal-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="wallet-options">
                <div class="wallet-option selected" data-wallet="metamask">
                    <div class="wallet-icon">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" alt="MetaMask">
                    </div>
                    <div class="wallet-info">
                        <h4>MetaMask</h4>
                        <p data-i18n="metamask_desc">Наиболее популярный крипто-кошелек</p>
                    </div>
                    <div class="wallet-check">
                        <i class="fas fa-check-circle"></i>
                    </div>
                </div>
                <div class="wallet-option" data-wallet="trustwallet">
                    <div class="wallet-icon">
                        <img src="https://trustwallet.com/assets/images/media/assets/TWT.png" alt="Trust Wallet">
                    </div>
                    <div class="wallet-info">
                        <h4>Trust Wallet</h4>
                        <p data-i18n="trust_desc">Официальный кошелек Binance</p>
                    </div>
                    <div class="wallet-check">
                        <i class="fas fa-check-circle"></i>
                    </div>
                </div>
                <div class="wallet-option" data-wallet="walletconnect">
                    <div class="wallet-icon">
                        <i class="fas fa-qrcode"></i>
                    </div>
                    <div class="wallet-info">
                        <h4>WalletConnect</h4>
                        <p data-i18n="walletconnect_desc">Подключение по QR-коду</p>
                    </div>
                    <div class="wallet-check">
                        <i class="fas fa-check-circle"></i>
                    </div>
                </div>
            </div>

            <div class="wallet-instructions">
                <h4><i class="fas fa-info-circle"></i> <span data-i18n="instructions">Инструкция:</span></h4>
                <ol>
                    <li data-i18n="instruction_1">Установите расширение MetaMask или приложение Trust Wallet</li>
                    <li data-i18n="instruction_2">Создайте или импортируйте кошелек</li>
                    <li data-i18n="instruction_3">Подключите к сети Binance Smart Chain (BSC)</li>
                    <li data-i18n="instruction_4">Пополните баланс USDT для инвестиций</li>
                </ol>
            </div>
            
            <div class="telegram-note" style="margin-top: 15px; padding: 10px; background: rgba(255,215,0,0.1); border-radius: 10px; border-left: 3px solid var(--accent-gold);">
                <p style="font-size: 13px; color: var(--text-secondary); margin: 0;">
                    <i class="fas fa-info-circle" style="color: var(--accent-gold); margin-right: 8px;"></i>
                    <span data-i18n="telegram_note">Если вы в Telegram: используйте WalletConnect или откройте приложение в браузере</span>
                </p>
            </div>
            
            <div class="modal-actions">
                <button class="modal-btn secondary" id="cancelWallet"><span data-i18n="cancel">Отмена</span></button>
                <button class="modal-btn primary" id="connectWallet">
                    <i class="fas fa-plug"></i>
                    <span data-i18n="connect">Подключить</span>
                </button>
            </div>
        </div>
    </div>

    <!-- МОДАЛКА ИНВЕСТИРОВАНИЯ -->
    <div class="modal modal-large" id="investModal">
        <div class="modal-header">
            <h3>
                <i class="fas fa-landmark"></i>
                <span id="investTitle">Инвестиция в район</span>
            </h3>
            <button class="modal-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="invest-split">
                <div class="invest-preview" id="tariffPreview"></div>
                <div class="invest-form-container">
                    <div class="form-group">
                        <label for="investAmount">
                            <i class="fas fa-coins"></i>
                            <span data-i18n="invest_amount">Сумма инвестиции (USDT)</span>
                        </label>
                        <div class="input-with-unit">
                            <input type="number" id="investAmount" min="10" step="1" value="10">
                            <span class="input-unit">USDT</span>
                        </div>
                        <div class="input-hint">
                            <span><span data-i18n="minimum">Минимум</span>: <strong>10 USDT</strong></span>
                            <span class="balance-available">
                                <span data-i18n="available_balance">Доступно</span>: <span id="availableBalance">0.00 USDT</span>
                            </span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="referrerAddress">
                            <i class="fas fa-user-tag"></i>
                            <span data-i18n="referrer">Аплайнер (необязательно)</span>
                        </label>
                        <input type="text" id="referrerAddress" placeholder="0x...">
                    </div>
                    <div class="invest-summary">
                        <h5 data-i18n="investment_summary">Сводка по инвестиции</h5>
                        <div class="summary-row">
                            <span data-i18n="amount">Сумма:</span>
                            <span id="summaryAmount">10.00 USDT</span>
                        </div>
                        <div class="summary-row">
                            <span data-i18n="daily_income">Доход в день:</span>
                            <span id="summaryDaily">0.05 USDT</span>
                        </div>
                        <div class="summary-row">
                            <span data-i18n="total_income">Общий доход:</span>
                            <span id="summaryTotal">1.50 USDT</span>
                        </div>
                        <div class="summary-row">
                            <span data-i18n="end_date">Окончание:</span>
                            <span id="summaryEndDate">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button class="modal-btn secondary" id="cancelInvest"><span data-i18n="cancel">Отмена</span></button>
                <button class="modal-btn primary" id="confirmInvest">
                    <i class="fas fa-check-circle"></i>
                    <span data-i18n="confirm">Подтвердить</span>
                </button>
            </div>
        </div>
    </div>

    <!-- МОДАЛКА С ФРАЗАМИ МЭРА -->
    <div class="modal modal-mayor" id="mayorPhrasesModal">
        <div class="modal-header">
            <div class="modal-header-with-avatar">
                <div class="modal-mayor-avatar">
                    <img src="assets/avatar-default.png" alt="Mayor" class="modal-avatar-image" id="modalAvatarImage">
                </div>
                <div class="modal-mayor-info">
                    <h3 data-i18n="mayor_title">Устав CryptoLand</h3>
                    <span class="modal-mayor-title" data-i18n="mayor_subtitle">Правила виртуального города</span>
                </div>
            </div>
            <button class="modal-close" id="closeMayorModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="mayor-phrase-container">
                <div class="mayor-quote-icon">
                    <i class="fas fa-quote-right"></i>
                </div>
                <p class="mayor-phrase" id="mayorPhraseText"></p>
                <div class="mayor-phrase-decoration"></div>
            </div>
            <div class="mayor-phrase-footer">
                <span class="mayor-phrase-date" id="mayorPhraseDate"></span>
                <button class="mayor-new-phrase-btn" id="newPhraseBtn">
                    <i class="fas fa-dice"></i>
                    <span data-i18n="new_phrase">Следующий устав</span>
                </button>
            </div>
        </div>
    </div>

    <!-- МОДАЛЬНОЕ ОКНО: СТАТУС ДЕПОЗИТОВ -->
    <div class="modal" id="depositsStatusModal">
        <div class="modal-header">
            <h3>
                <i class="fas fa-clock"></i>
                <span data-i18n="deposits_status">Статус депозитов</span>
            </h3>
            <button class="modal-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="deposits-status-list" id="depositsStatusList"></div>
            <div class="deposits-status-summary" id="depositsStatusSummary"></div>
            <div class="modal-actions">
                <button class="modal-btn primary" id="closeStatusModal">
                    <i class="fas fa-check"></i>
                    <span data-i18n="ok">OK</span>
                </button>
            </div>
        </div>
    </div>

    <!-- КОНТЕЙНЕР УВЕДОМЛЕНИЙ -->
    <div class="notifications-container" id="notificationsContainer"></div>

    <!-- ПОДКЛЮЧЕНИЕ БИБЛИОТЕК -->
    <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.7.3/dist/web3.min.js"></script>
    <script src="scripts/config.js"></script>
    <script src="scripts/web3.js"></script>
    <script src="scripts/utils.js"></script>
    <script src="scripts/app.js"></script>
</body>
</html>


